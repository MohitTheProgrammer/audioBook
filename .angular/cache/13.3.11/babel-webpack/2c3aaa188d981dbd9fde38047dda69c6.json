{"ast":null,"code":"import { environment } from \"src/environments/environment\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../books.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\n\nfunction StoryComponent_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 7);\n    i0.ɵɵlistener(\"click\", function StoryComponent_li_6_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r4);\n      const audio_r2 = restoredCtx.$implicit;\n      const ctx_r3 = i0.ɵɵnextContext();\n      return ctx_r3.setSong(audio_r2);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const audio_r2 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", audio_r2, \" \");\n  }\n}\n\nfunction StoryComponent_main_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"main\")(1, \"div\", 8);\n    i0.ɵɵelement(2, \"img\", 9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 10)(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 11);\n    i0.ɵɵelement(7, \"audio\", 12);\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r1.url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.bookInfo.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r1.fullUrl, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let StoryComponent = /*#__PURE__*/(() => {\n  class StoryComponent {\n    constructor(bookService, router) {\n      this.bookService = bookService;\n      this.router = router;\n    }\n\n    ngOnInit() {\n      const bookIndex = this.router.snapshot.params[\"bookIndex\"];\n      this.bookService.getBook(bookIndex).subscribe(res => {\n        this.book = res;\n      });\n      console.log(this.book);\n    }\n\n    get fullUrl() {\n      const key = this.router.snapshot.params[\"bookKey\"];\n      return `${environment.STORAGE_URL}/audio-book-fe653.appspot.com/o/stories%2F${key}%2F${this.currentAudioUrl}?alt=media`;\n    }\n\n    setSong(audio) {\n      this.currentAudioUrl = audio;\n      const bookIndex = this.router.snapshot.params[\"bookIndex\"];\n      this.bookService.getBook(bookIndex).subscribe(res => {\n        this.url = `https://firebasestorage.googleapis.com/v0/b/audio-book-fe653.appspot.com/o/posters%2F${res.key}.jpg?alt=media&token=aef69868-a1b9-47ca-b0ea-ab35a3fe9fd2`;\n        this.bookInfo = res;\n        console.log(this.url, this.bookInfo);\n      });\n    }\n\n  }\n\n  StoryComponent.ɵfac = function StoryComponent_Factory(t) {\n    return new (t || StoryComponent)(i0.ɵɵdirectiveInject(i1.BooksService), i0.ɵɵdirectiveInject(i2.ActivatedRoute));\n  };\n\n  StoryComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StoryComponent,\n    selectors: [[\"app-story\"]],\n    decls: 9,\n    vars: 2,\n    consts: [[1, \"container\", \"mt-3\", \"audio-list-container\"], [1, \"row\"], [1, \"col-md-6\", \"offset-md-3\"], [1, \"list-group\", \"audio-list\"], [\"class\", \"list-group-item audio-list-item\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"container2\", \"mt-3\"], [4, \"ngIf\"], [1, \"list-group-item\", \"audio-list-item\", 3, \"click\"], [1, \"img\"], [\"alt\", \"hello\", 3, \"src\"], [1, \"desc\"], [1, \"audio\"], [\"controls\", \"\", 3, \"src\"]],\n    template: function StoryComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\")(1, \"div\", 0)(2, \"div\", 1)(3, \"div\", 2)(4, \"aside\")(5, \"ul\", 3);\n        i0.ɵɵtemplate(6, StoryComponent_li_6_Template, 2, 1, \"li\", 4);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵtemplate(8, StoryComponent_main_8_Template, 8, 3, \"main\", 6);\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngForOf\", ctx.book == null ? null : ctx.book.files);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.currentAudioUrl);\n      }\n    },\n    directives: [i3.NgForOf, i3.NgIf],\n    styles: [\"section[_ngcontent-%COMP%]{display:flex;justify-content:left;margin-top:100px;height:70vh}.container[_ngcontent-%COMP%]{width:40%;margin-left:50px}.container2[_ngcontent-%COMP%]{width:40%;margin-left:50px;display:flex;flex-direction:column;align-items:center}.audio[_ngcontent-%COMP%]{display:flex;justify-content:center;width:400px}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:300px;height:300px;border-radius:50%;border:1px solid white}.img[_ngcontent-%COMP%]{display:flex;justify-content:center}.desc[_ngcontent-%COMP%]{text-align:center;margin:10px 0}.desc[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}.list-group[_ngcontent-%COMP%]{list-style:none;padding:0;max-height:80vh;overflow:auto}.list-group-item[_ngcontent-%COMP%]{border:1px solid #ddd;cursor:pointer;padding:10px;margin:5px}.list-group-item[_ngcontent-%COMP%]:hover{background-color:#f0f0f0;color:#000}audio[_ngcontent-%COMP%]{width:90%}@keyframes rotate{0%{transform:rotate(-360deg)}to{transform:rotate(360deg)}}@media only screen and (max-width: 600px){.container[_ngcontent-%COMP%]{width:80%;height:45%;overflow:hidden;margin-left:0}.container2[_ngcontent-%COMP%]{width:80%;height:70%;overflow:hidden;margin-left:0}section[_ngcontent-%COMP%]{flex-direction:column;align-items:center}.list-group-item[_ngcontent-%COMP%]{overflow:hidden;width:93%}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:180px;height:180px}.audio[_ngcontent-%COMP%]{width:300px}}\"]\n  });\n  return StoryComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}